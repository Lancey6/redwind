{% extends "base.html" %}

{% block content %}

  <form id="edit_form" method="POST">
    <input type="hidden" id="post_id" name="post_id" value="{{ post.shortid or 'new' }}"/>
    <input type="hidden" id="post_type" name="post_type" value="{{ post.post_type }}"/>


    {% if post.draft   %}
      <input style="padding: 10px" type="button" id="save_draft_button" value="Save Draft"/>
      <input style="padding: 10px" type="button" id="publish_button" value="Publish"/>
    {% else %}
      <input style="padding: 10px" type="button" id="save_draft_button" value="Un-Publish"/>
      <input style="padding: 10px" type="button" id="publish_button" value="Re-Publish"/>
    {% endif %}

    {% if post.post_type == 'article' %}
      <div class="title">
        <label><span class="heading">Title</span><input id="title" name="title" size="60" value="{{ post.title or '' }}"/></label>
      </div>
      <div class="slug">
        <label><span class="heading">Slug</span><input id="slug" name="slug" size="60" value="{{ post.slug or ''}}"/></label>
      </div>
    {% endif %}

    {% if post.post_type == 'reply' %}
      <div class="in_reply_to">
        <label><span class="heading">In Reply To (URL)</span><textarea name="in_reply_to" cols="50" rows="2">{{post.in_reply_to or ""}}</textarea></label>
      </div>
    {% endif %}

    {% if post.post_type == 'share' %}
      <div class="repost_source">
        <label><span class="heading">Repost (URL)</span><textarea name="repost_source" cols="50" rows="2">{{post.repost_source or ""}}</textarea></label>
      </div>
    {% endif %}

    {% if post.post_type == 'like' %}
      <div class="like_of">
        <label><span class="heading">Like of (URL)</span><textarea name="like_of" cols="50" rows="2">{{post.like_of or ""}}</textarea></label>
      </div>
    {% endif %}

    <div class="content">
      <textarea name="content" id="content" style="width:100%" rows="{{ 30 if post.post_type == 'article' else 5 }}">{{ post.content }}</textarea>
    </div>

    <div style="position: relative">
      <span style="position: absolute; top: 2px; right: -35px; padding: 1px;" size="8" type="text" name="char_count" id="char_count">&nbsp;</span>
      <textarea  name="tweet_preview" id="tweet_preview" style="height: 75px; width:100%; background-color: #eeeeff"> </textarea><br/>
    </div>

    <div class="location">
      <input type="button" id="get_coords_button" value="Location:"/>
      <label>Lat <input id="latitude" name="latitude" size="10" value="{{ post.latitude or ''}}"/></label>
      <label>Long <input id="longitude" name="longitude" size="10" value="{{ post.longitude or ''}}"/></label>
      <label>Name <input id="location_name" name="location_name" size="21" value="{{ post.location or ''}}"/></label>
    </div>


    <p>
      <select name="content_format" id="content_format">
        <option {% if post.content_format == "markdown" %}selected{% endif %}>markdown</option>
        <option {% if post.content_format == "plain" %}selected{% endif %}>plain</option>
        <option {% if post.content_format == "html" %}selected{% endif %}>html</option>
      </select><br/>

      <label><input type="checkbox" id="send_to_twitter" name="send_to_twitter" value="true" {% if False and post.id is none %}checked{% endif %}/>Share on Twitter</label><br/>

      <label><input type="checkbox" id="send_to_facebook" name="send_to_facebook" value="true" {% if False and post.id is none %}checked{% endif %}/>Share on Facebook</label><br/>

      <label><input type="checkbox" id="send_webmentions" name="send_webmentions" value="true" {% if post.id is none %}checked{% endif %}/>Send Webmentions</label>
    </p>



    {% if advanced %}
      <div class="twitter_status_id">
        <label><span class="heading">Twitter Status ID</span><input name="twitter_status_id" size="60" value="{{post.twitter_status_id or ''}}"></label>
      </div>
      <div class="facebook_post_id">
        <label><span class="heading">Facebook Post ID</span><input name="facebook_post_id" size="60" value="{{post.facebook_post_id or ''}}"></label>
      </div>
      <a href="#" id="uploads_link">Uploads</a>
    {% endif %}

  </form>

  <form id="image_upload">
    <label>
      <span class="heading">Add Image:</span><input type="file" id="image_upload_button" text="Add Image" accept="image/*"></input>
    </label>
  </form>

  <ul id="result"></ul>

  <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="{{url_for('static', filename='js/editor.js')}}"></script>

{% endblock %}
