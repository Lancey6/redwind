{% extends "base.html" %}

{% block content %}

  <div class="post {{post.post_type}} h-entry">

    <div style="float: left; width: 75px;">
      {% include "hcard_author.html" %}
    </div>

    <div style="float:left; width: calc(100% - 75px)">
      {% if post.title %}
        <h2 class="p-name">{{ post.title }}</h2>
        <div class="e-content">
          {{ post.html_content }}
        </div>
      {% else %}
        <div class="p-name e-content">
          {{ post.html_content }}
        </div>
      {% endif %}

      {% include "single_post_links.html" %}

      {% if post.mentions %}
        <div class="replies">
          <a name="mentions"></a>

          {% for reply in post.mentions %}            
            <div class="p-comment">

              <div style="float:left; width:50px">
                {% if reply.author_name %}
                  {% if reply.author_url %} <a class="p-author h-card" href="{{reply.author_url}}">
                  {% else %} <p class="p-author h-card"> {% endif %}

                  <img src="{{reply.author_image}}" width="48px" alt="{{reply.author_name}}"/><br/>

                  {{reply.author_name}}

                  {% if reply.author_url %} </a>
                  {% else %} </p> {% endif %}
                  
                {% endif %}
              </div>

              <div style="float:left; width: calc(100%-50px)">
                <p class="e-content">{{ reply.content }}</p>
                
                <time class="dt-published" datetime="{{ reply.pub_date | strftime('%Y-%m-%d %H:%M')}}">
                  <a class="u-url" href="{{ reply.permalink }}">{{ reply.pub_date | strftime('%Y-%m-%d %H:%M') }}</a>
                </time>

                {% if authenticated %}
                  | <a href="{{ url_for('delete_by_id', post_type='mention', post_id=reply.id, redirect=post.permalink_url) }}">Delete</a>
                {% endif %}    
              </div>

              <div style="clear:both"></div>
            </div>
            
          {% endfor %}
        </div>    
      {% endif %}
    </div>  
  </div>
  
{% endblock content %}

