{% extends "base.html" %}

{% block content %}

  <div class="post {{post.post_type}} h-entry">

    {% include "hcard_author.html" %}
    
    <div style="float:left; width: calc(100% - 75px)">
      {% if post.title %}
        <h2 class="p-name">{{ post.title }}</h2>
        <div class="e-content">
          {{ post.html_content }}
        </div>
      {% else %}
        <div class="p-name e-content">
          {{ post.html_content }}
        </div>
      {% endif %}

      {% include "single_post_links.html" %}

      {% if post.mentions %}
        <div class="replies">
          <a name="mentions"></a>

          {% for reply in post.mentions %}            
            <div class="p-comment">

              <div class="p-author h-card">

                <div style="position: relative; float: left; width: 48px; height: 64px; margin-right: 6px;">
                  <img class="u-photo" src="{{reply.author_image or url_for('static', filename='img/users/placeholder.png')}}" width="48px" alt="{{reply.author_name}}"/>
                </div>
                
                {% if reply.author_name %}
                  {% if reply.author_url %} <a class="p-name u-url" href="{{reply.author_url}}">
                  {% else %} <span class="p-name"> {% endif %}
                  {{reply.author_name}}
                  {% if reply.author_url %} </a>
                  {% else %} </span> {% endif %}
                {% endif %}
                
              </div>

              <p class="e-content">{{ reply.content }}</p>
              
              <time class="dt-published" datetime="{{ reply.pub_date | strftime('%Y-%m-%d %H:%M %Z (%z)')}}">
                <a class="u-url" href="{{ reply.permalink }}">{{ reply.pub_date | strftime('%Y-%m-%d %H:%M %Z (%z)') }}</a>
              </time>

              {% if authenticated %}
                | <a href="{{ url_for('delete_by_id', post_type='mention', post_id=reply.id, redirect=post.permalink_url) }}">Delete</a>
              {% endif %}    

              <div style="clear:both"></div>
            </div>
            
          {% endfor %}
        </div>    
      {% endif %}
    </div>  
  </div>
  
{% endblock content %}

